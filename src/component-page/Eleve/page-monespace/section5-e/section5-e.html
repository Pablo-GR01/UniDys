<app-icon></app-icon>

<!-- SECTION UTILISATEUR -->
<div class="flex flex-wrap items-center justify-between gap-4 px-4 py-6 border-4 border-[#8002FF] bg-[#0A072E] text-white rounded-xl max-w-7xl mx-auto mt-5">

  <!-- Initiales -->
  <div class="flex items-center justify-center bg-[#8002FF] rounded-full font-black w-12 h-12 text-lg sm:w-14 sm:h-14 sm:text-xl lg:w-16 lg:h-16 lg:text-2xl">
    {{ userService.getInitiales() || 'IN' }}
  </div>

  <!-- Bonjour + nom -->
  <div class="font-bold text-lg sm:text-xl lg:text-2xl">
    Bonjour {{ userService.getNomComplet() || 'Invité' }}
  </div>

  <!-- Bouton "Laisser un avis" -->
  <button (click)="ouvrirPopup()"
    class="flex items-center gap-2 bg-[#8002FF] hover:bg-[#3F0255] text-white px-4 py-2 rounded transition duration-300">
    <i class="fas fa-plus"></i>
    Laisser un avis
  </button>
</div>

<!-- POP-UP AVIS -->
<div *ngIf="popupOuvert" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
  <div class="bg-[#020118] text-white border-4 border-[#8002FF] rounded-xl shadow-xl w-full max-w-4xl p-6 flex flex-col md:flex-row gap-8">

    <!-- Colonne gauche : logo -->
    <div class="flex items-center justify-center md:w-1/2">
      <img src="/assets/LOGO.png" alt="Logo UniDys" class="max-w-[200px] h-auto">
    </div>

    <!-- Colonne droite : formulaire -->
    <div class="md:w-1/2">
      <h2 class="text-2xl font-bold mb-6 text-center md:text-left">Laisser un avis</h2>

      <input type="text" [(ngModel)]="prenom" placeholder="Prénom"
        class="w-full border-2 border-[#8002FF] p-3 mb-4 rounded-lg bg-transparent text-white placeholder-gray-400" />

      <input type="text" [(ngModel)]="nom" placeholder="Nom"
        class="w-full border-2 border-[#8002FF] p-3 mb-4 rounded-lg bg-transparent text-white placeholder-gray-400" />

      <textarea [(ngModel)]="avisMessage" placeholder="Votre message" rows="4"
        class="w-full border-2 border-[#8002FF] p-3 mb-4 rounded-lg bg-transparent text-white placeholder-gray-400 resize-none"></textarea>

      <div class="flex justify-end gap-3">
        <button (click)="fermerPopup()"
          class="px-4 py-2 rounded-lg border border-gray-500 hover:bg-[#3F0255] transition duration-200">
          Annuler
        </button>
        <button (click)="validerAvis()"
          class="bg-[#8002FF] px-4 py-2 rounded-lg hover:bg-[#3F0255] transition duration-200">
          Valider
        </button>
      </div>
    </div>

  </div>
</div>
