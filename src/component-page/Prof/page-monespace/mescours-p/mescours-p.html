<!-- mescours-p.html complet et corrigÃ© -->
<div class="max-w-7xl mx-auto p-4 text-gray-100 font-sans">
  <h2 class="text-3xl md:text-4xl font-bold mb-6 text-center text-white border-b-6 border-[#8002FF] ml-120 mr-120 pb-5 mt-5">Vos Cours</h2>

  <!-- Boutons de dÃ©filement -->
  <div class="flex justify-center mb-6 gap-4">
    <button (click)="scroll(-1)"
      class="w-10 h-10 text-xl bg-[#8002FF] rounded-full text-white hover:bg-[#3F0255] transition flex items-center justify-center">
      <i class="fas fa-chevron-left"></i>
    </button>
    <button (click)="scroll(1)"
      class="w-10 h-10 text-xl bg-[#8002FF] rounded-full text-white hover:bg-[#3F0255] transition flex items-center justify-center">
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>

  <!-- Liste des cours -->
  <div #track class="flex gap-6 pb-6 px-2 overflow-hidden">
    <div *ngFor="let cours of cours"
      class="min-w-[240px] max-w-[250px] bg-[#0A092B] text-white rounded-xl shadow-md hover:shadow-xl transition-shadow cursor-pointer p-4 flex-shrink-0 border-2 border-[#8002FF]">
      <img [src]="getImageParMatiere(cours.matiere)" alt="{{ cours.matiere }}"
        class="w-full h-32 object-cover rounded-lg mb-3" />
      <h3 class="text-lg font-bold mb-1 truncate">{{ cours.titre }}</h3>
      <p class="text-sm text-white"><span class="font-semibold">MatiÃ¨re :</span> {{ cours.matiere }}</p>
      <p class="text-sm text-white"><span class="font-semibold">Niveau :</span> {{ cours.niveau }}</p>

      <!-- Actions -->
      <div class="mt-4 flex flex-wrap gap-2 justify-center text-white">
        
        <button *ngIf="cours.lienYoutube" (click)="ouvrirLienYoutube(cours.lienYoutube)"
          class="bg-[#8002FF] hover:bg-[#3F0255] px-3 py-1 rounded text-sm">
          <i class="fas fa-headphones"></i>
        </button>

        <a [routerLink]="['/coursdetail', cours._id]"
          class="bg-[#8002FF] hover:bg-[#3F0255] px-3 py-1 rounded text-sm text-white inline-flex items-center justify-center">
          <i class="fas fa-eye"></i>
        </a>


        <button *ngIf="cours.fichierPdf" (click)="telechargerFichier(cours.fichierPdf)"
          class="bg-[#8002FF] hover:bg-[#3F0255] px-3 py-1 rounded text-sm">
          <i class="fas fa-download"></i>
        </button>

        <button (click)="ouvrirPopupEdition(cours)" class="bg-[#8002FF] hover:bg-[#3F0255] px-3 py-1 rounded text-sm">
          <i class="fas fa-pen"></i>
        </button>

        <button (click)="supprimerCours(cours)" class="bg-[#8002FF] hover:bg-[#3F0255] px-3 py-1 rounded text-sm">
          <i class="fas fa-trash-alt"></i>
        </button>

      </div>
    </div>
  </div>

  <!-- POPUP PDF -->
  <div *ngIf="popupVisible" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4"
    (click)="fermerPopup()">
    <div
      class="relative bg-[#020118] text-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] p-6 overflow-auto border-6 border-[#8002FF]"
      (click)="$event.stopPropagation()">
      <button class="absolute top-4 right-4 text-white hover:text-red-600 text-3xl font-bold"
        (click)="fermerPopup()">&times;</button>
      <h3 class="text-2xl font-bold mb-4">{{ coursSelectionne?.titre }}</h3>
      <iframe *ngIf="pdfUrlSanitized" [src]="pdfUrlSanitized" class="w-full h-[60vh] border rounded-lg"></iframe>
      <p *ngIf="coursSelectionne?.lienYoutube" class="mt-4 text-center">
        <a *ngIf="coursSelectionne?.lienYoutube" [href]="coursSelectionne?.lienYoutube" target="_blank"
          rel="noopener noreferrer" class="inline-block">
          <button
            class="bg-[#8002FF] hover:bg-[#3F0255] text-white pt-2 pb-2 pl-5 pr-5 rounded text-sm flex items-center gap-2">
            <i class="fa-solid fa-video"></i>
            Voir la vidÃ©o YouTube associÃ©e
          </button>
        </a>

      </p>
    </div>
  </div>

  <!-- POPUP MODIFICATION -->
  <div *ngIf="popupEditionVisible" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4"
    (click)="fermerPopupEdition()">
    <div
      class="relative bg-[#020118] text-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] p-6 overflow-auto border-6 border-[#8002FF]"
      (click)="$event.stopPropagation()">
      <button class="absolute top-4 right-4 text-gray-500 hover:text-red-500 text-3xl font-bold"
        (click)="fermerPopupEdition()">&times;</button>
      <h3 class="text-2xl font-bold mb-6 text-center">Modifier le cours</h3>

      <input [(ngModel)]="coursAModifier.titre" type="text" placeholder="Nouveau titre"
        class="w-full border-2 border-[#8002FF] rounded-lg px-4 py-2 mb-4" />
      <label class="block font-semibold mb-2">Nouveau fichier PDF :</label>
      <input type="file" (change)="onFileSelected($event)"
        class="w-full border-2 border-[#8002FF] rounded-lg px-4 py-2 mb-4" />
      <p *ngIf="fichierPdfModifie" class="text-sm text-gray-600">ðŸ“„ {{ fichierPdfModifie?.name }}</p>

      <div class="flex justify-end gap-3 mt-6">
        <button (click)="validerModificationCours()"
          class="px-4 py-2 bg-[#8002FF] hover:bg-[#3F0255] text-white rounded">Valider</button>
      </div>
    </div>
  </div>
</div>