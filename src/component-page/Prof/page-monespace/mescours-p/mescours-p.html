<div class="ml-65 mt-10 max-w-7xl mx-auto p-6 font-sans text-[var(--Blanc)] bg-[var(--Bleu-Foncé)] min-h-screen">

  <!-- ===================== CONTENEUR FLEX ===================== -->
  <div class="flex flex-col lg:flex-row gap-8">

    <!-- -------------------- SECTION COURS -------------------- -->
    <section class="flex-1 mb-12 lg:mb-0 border-3 border-[var(--Violet)] p-6 rounded-2xl">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-[var(--Blanc)] flex items-center gap-3">
        <span class="w-2 h-8 bg-[var(--Violet)] rounded-full"></span>
        <i class="fas fa-book mr-2"></i> Cours
      </h2>

      <div class="flex gap-4 sm:gap-6 overflow-x-auto pb-4 scrollbar-hide snap-x snap-mandatory"
           [ngClass]="{'justify-center': getCoursParPage('Cours :', pageCours).length === 1}">
        <div *ngFor="let cours of getCoursParPage('Cours :', pageCours)"
             class="snap-start flex-shrink-0 w-60 sm:w-64 md:w-72 bg-[var(--Bleu)] rounded-2xl shadow-lg border-3 border-[var(--Violet)] transition-all">

          <!-- Image + badge -->
          <div class="relative">
            <img [src]="getImageParMatiere(cours.matiere)"
                 alt="Image du cours"
                 class="w-full h-36 object-cover rounded-t-2xl" />
            <span class="absolute top-2 left-2 bg-[var(--Violet)] text-[var(--Blanc)] text-xs px-2 py-1 rounded-full">
              {{ cours.niveau }}
            </span>
          </div>

          <!-- Contenu -->
          <div class="p-3 sm:p-4">
            <h3 class="text-sm sm:text-md font-semibold text-[var(--Blanc)] mb-1 truncate">
              <i class="fas fa-tag mr-1"></i> {{ cours.titre }}
            </h3>
            <p class="text-xs sm:text-sm text-[var(--Blanc)] mb-1">
              Matière : <span class="font-medium">{{ cours.matiere }}</span>
            </p>
            <p class="text-xs sm:text-sm mb-2">
              QCM :
              <span *ngIf="cours.qcms?.length" class="text-[var(--Vert)] font-medium">
                <i class="fas fa-check-circle mr-1"></i>Disponible
              </span>
              <span *ngIf="!cours.qcms?.length" class="text-[var(--Rouge)] font-medium">
                <i class="fas fa-times-circle mr-1"></i>Non disponible
              </span>
            </p>

            <!-- Actions -->
            <div class="flex flex-wrap gap-2">
              <button *ngIf="cours.lienYoutube" (click)="ouvrirLienYoutube(cours.lienYoutube)"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Bleu)] hover:bg-purple-500 rounded-lg transition">
                <i class="fab fa-youtube mr-1"></i> Lire
              </button>
              <a [routerLink]="['/coursdetail', cours._id]"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Bleu)] via-[var(--Violet)] to-[var(--Violet-Foncé)] border-3 border-[var(--Violet)] hover:bg-gray-600 rounded-lg transition">
                <i class="fas fa-eye mr-1"></i> Voir
              </a>
              <button *ngIf="cours.fichierPdf" (click)="telechargerFichier(cours.fichierPdf)"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Bleu)] via-[var(--Violet)] to-[var(--Violet-Foncé)] border-3 border-[var(--Violet)] hover:bg-gray-600 rounded-lg transition">
                <i class="fas fa-file-pdf mr-1"></i> PDF
              </button>
              <button (click)="ouvrirPopupEdition(cours)"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Bleu)] via-[var(--Violet)] to-[var(--Violet-Foncé)] border-3 border-[var(--Violet)] hover:bg-gray-600 rounded-lg transition">
                <i class="fas fa-edit mr-1"></i> Modifier
              </button>
              <button (click)="supprimerCours(cours)"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Rouge)] to-[var(--Violet-Foncé)] border-3 border-[var(--Violet)] hover:bg-red-500 rounded-lg transition">
                <i class="fas fa-trash-alt mr-1"></i> Suppr
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Pagination Cours -->
      <div class="flex justify-center gap-4 mt-4 flex-wrap">
        <button (click)="pagePrecedente('Cours :')" [disabled]="pageCours === 1"
                class="px-3 py-1 bg-[var(--Violet)] text-white rounded disabled:opacity-50">Précédent</button>
        <span class="text-white">Page {{ pageCours }} / {{ getNombrePages('Cours :') }}</span>
        <button (click)="pageSuivante('Cours :')" [disabled]="pageCours === getNombrePages('Cours :')"
                class="px-3 py-1 bg-[var(--Violet)] text-white rounded disabled:opacity-50">Suivant</button>
      </div>
    </section>

    <!-- -------------------- SECTION EXERCICES -------------------- -->
    <section class="flex-1 border-3 border-[var(--Violet)] p-6 rounded-2xl">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-[var(--Blanc)] flex items-center gap-3">
        <span class="w-2 h-8 bg-[var(--Bleu)] border-2 border-[var(--Violet)] rounded-full"></span>
        <i class="fas fa-pencil-alt mr-2"></i> Exercices
      </h2>

      <div class="flex gap-4 sm:gap-6 overflow-x-auto pb-4 scrollbar-hide snap-x snap-mandatory"
           [ngClass]="{'justify-center': getCoursParPage('Exercice :', pageExercices).length === 1}">
        <div *ngFor="let cours of getCoursParPage('Exercice :', pageExercices)"
             class="snap-start flex-shrink-0 w-60 sm:w-64 md:w-72 bg-[var(--Bleu)] rounded-2xl shadow-lg border-3 border-[var(--Violet)] transition-all">

          <!-- Image + badge -->
          <div class="relative">
            <img [src]="getImageParMatiere(cours.matiere)"
                 alt="Image de l'exercice"
                 class="w-full h-36 object-cover rounded-t-2xl" />
            <span class="absolute top-2 left-2 bg-[var(--Bleu)] border-3 border-[var(--Violet)] text-[var(--Blanc)] text-xs px-2 py-1 rounded-full">
              {{ cours.niveau }}
            </span>
          </div>

          <!-- Contenu -->
          <div class="p-3 sm:p-4">
            <h3 class="text-sm sm:text-md font-semibold text-[var(--Blanc)] mb-1 truncate">
              <i class="fas fa-tag mr-1"></i> {{ cours.titre }}
            </h3>
            <p class="text-xs sm:text-sm text-[var(--Blanc)] mb-1">
              Matière : <span class="font-medium">{{ cours.matiere }}</span>
            </p>
            <p class="text-xs sm:text-sm mb-2">
              QCM :
              <span *ngIf="cours.qcms?.length" class="text-[var(--Vert)] font-medium">
                <i class="fas fa-check-circle mr-1"></i>Disponible
              </span>
              <span *ngIf="!cours.qcms?.length" class="text-[var(--Rouge)] font-medium">
                <i class="fas fa-times-circle mr-1"></i>Non disponible
              </span>
            </p>

            <!-- Actions -->
            <div class="flex flex-wrap gap-2">
              <button *ngIf="cours.lienYoutube" (click)="ouvrirLienYoutube(cours.lienYoutube)"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Bleu)] hover:bg-purple-500 rounded-lg transition">
                <i class="fab fa-youtube mr-1"></i> Lire
              </button>
              <a [routerLink]="['/coursdetail', cours._id]"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Bleu)] via-[var(--Violet)] to-[var(--Violet-Foncé)] border-3 border-[var(--Violet)] hover:bg-gray-600 rounded-lg transition">
                <i class="fas fa-eye mr-1"></i> Voir
              </a>
              <button *ngIf="cours.fichierPdf" (click)="telechargerFichier(cours.fichierPdf)"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Bleu)] via-[var(--Violet)] to-[var(--Violet-Foncé)] border-3 border-[var(--Violet)] hover:bg-gray-600 rounded-lg transition">
                <i class="fas fa-file-pdf mr-1"></i> PDF
              </button>
              <button (click)="ouvrirPopupEdition(cours)"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Bleu)] via-[var(--Violet)] to-[var(--Violet-Foncé)] border-3 border-[var(--Violet)] hover:bg-gray-600 rounded-lg transition">
                <i class="fas fa-edit mr-1"></i> Modifier
              </button>
              <button (click)="supprimerCours(cours)"
                class="flex-1 min-w-[70px] text-center px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-gradient-to-r from-[var(--Rouge)] to-[var(--Violet-Foncé)] border-3 border-[var(--Violet)] hover:bg-red-500 rounded-lg transition">
                <i class="fas fa-trash-alt mr-1"></i> Suppr
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Pagination Exercices -->
      <div class="flex justify-center gap-4 mt-4 flex-wrap">
        <button (click)="pagePrecedente('Exercice :')" [disabled]="pageExercices === 1"
                class="px-3 py-1 bg-[var(--Violet)] text-white rounded disabled:opacity-50">Précédent</button>
        <span class="text-white">Page {{ pageExercices }} / {{ getNombrePages('Exercice :') }}</span>
        <button (click)="pageSuivante('Exercice :')" [disabled]="pageExercices === getNombrePages('Exercice :')"
                class="px-3 py-1 bg-[var(--Violet)] text-white rounded disabled:opacity-50">Suivant</button>
      </div>
    </section>

  </div>
</div>
