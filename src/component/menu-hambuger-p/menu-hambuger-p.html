<app-icon></app-icon>

<!-- Menu utilisateur -->
<div class="flex items-center gap-3 relative">

  <!-- Initiales -->
  <div class="border-4 border-[#8002FF] w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-md 2xl:text-lg">
    {{ userprofil.getInitiales() }}
  </div>

  <!-- Menu bureau -->
  <div class="hidden md:flex items-center gap-1 cursor-pointer"
       role="button"
       tabindex="0"
       aria-haspopup="true"
       [attr.aria-expanded]="menuOuvert"
       (click)="toggleMenu()">
    <a routerLink="/monespaceP"
       class="text-white font-black text-sm sm:text-lg xl:text-xl 2xl:text-2xl hover:text-[#8002FF]"
       (click)="fermerMenus()">
      Mon Espace
    </a>
    <svg class="w-4 h-4 sm:w-6 sm:h-6 transition-transform duration-300 text-white"
         [class.rotate-180]="menuOuvert"
         fill="none" stroke="currentColor" stroke-width="2"
         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </div>

  <!-- Hamburger menu mobile -->
  <button class="block md:hidden text-white focus:outline-none" (click)="toggleMobileMenu()">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>
</div>

<!-- Menu déroulant bureau -->
<div *ngIf="menuOuvert && !mobileMenu"
     class="absolute right-4 mt-2 bg-[#020118] border-2 border-[#8002FF] text-white rounded-xl shadow-md z-50 w-48 sm:w-56">
  <ul class="flex flex-col gap-1 py-2">
    <li class="px-4 py-2 hover:bg-[#8002FF] cursor-pointer rounded flex items-center gap-2">
      <i class="fa-solid fa-circle-info"></i>
      <a routerLink="/InfoP" class="block w-full text-sm" (click)="fermerMenus()">Informations</a>
    </li>
    <li class="px-4 py-2 hover:bg-[#8002FF] cursor-pointer rounded flex items-center gap-2"
        (click)="deconnecter()">
      <i class="fa-solid fa-power-off"></i>
      <span class="block w-full text-sm cursor-pointer">Déconnexion</span>
    </li>
  </ul>
</div>

<!-- Menu mobile -->
<div *ngIf="mobileMenu"
     class="absolute top-14 right-4 bg-[#020118] border-2 border-[#8002FF] text-white rounded-xl shadow-md z-50 w-48">
  <ul class="flex flex-col gap-1 py-2">
    <li class="px-4 py-2 hover:bg-[#8002FF] cursor-pointer rounded">
      <a routerLink="/accueilE" class="block w-full text-sm" (click)="fermerMenus()">Accueil</a>
    </li>
    <li class="px-4 py-2 hover:bg-[#8002FF] cursor-pointer rounded">
      <a routerLink="/coursE" class="block w-full text-sm" (click)="fermerMenus()">Cours</a>
    </li>
    <li class="px-4 py-2 hover:bg-[#8002FF] cursor-pointer rounded">
      <a routerLink="/aproposE" class="block w-full text-sm" (click)="fermerMenus()">À propos</a>
    </li>
    <li class="px-4 py-2 hover:bg-[#8002FF] cursor-pointer rounded flex items-center gap-2">
      <i class="fa-solid fa-circle-info"></i>
      <a routerLink="/InfoE" class="block w-full text-sm" (click)="fermerMenus()">Informations</a>
    </li>
    <li class="px-4 py-2 hover:bg-[#8002FF] cursor-pointer rounded flex items-center gap-2"
        (click)="deconnecter()">
      <i class="fa-solid fa-power-off"></i>
      <span class="block w-full text-sm cursor-pointer">Déconnexion</span>
    </li>
  </ul>
</div>
